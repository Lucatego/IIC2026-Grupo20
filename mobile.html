<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Camera</title>
    </head>

    <body>
        <script src="https://app.protobject.com/framework/p.js"></script>
        <script src="shared.js"></script>
        <h1>Cámara</h1>
        <script>
            // Aca se debe probar con camara 0 (frontal).
            // Probar con otro celular!
            Protobject.Aruco.start(10, 1);
            Protobject.Aruco.showPreview({ top: 0, left: 0, width: 720/3, height: 1280/3 })

            
            Protobject.Aruco.onData((data) => {
                const ids = [100, 200, 250, 300];
                // let detected = [];
                console.log("Data entrante")
                for (const id of ids) {
                    if (data[id]) {
                        // Si el marcador está presente, guarda su id y posición en el eje Y
                        /*
                        detected.push({ 
                            id: id, 
                            y: data[id].position.y 
                        });

                        // Ordena los marcadores detectados en función de su posición en el eje Y (de arriba hacia abajo)
                        detected.sort((a, b) => b.y - a.y);

                        // Crea un nuevo array que contiene solo los IDs de los marcadores en el orden determinado
                        let orderPosition = markers.map(marker => marker.id);
                        */
                        // Envía los IDs ordenados al sistema principal
                        Protobject.Core.send(id).to('index.html');
                    }
                }

            });
        </script>
    </body>

</html>
